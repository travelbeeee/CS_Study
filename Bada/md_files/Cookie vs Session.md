### Cookie vs Session

#### 쿠키, 세션이 필요한 이유

HTTP는 Stateless 특징을 가진다. 이 때문에 클라이언트의 정보를 기억하지 못한다. 

따라서, 로그인을 한 후에도 로그인 정보를 기억하지 못한다. 이를 해결하기 위해 클라이언트의 정보를 확인할 수 있는 확인증을 부여할 수 있다.

쿠키와 세션이 확인증 역할을 수행하는 방식 중 하나이다. 

#### 쿠키

서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각이다. 

HTTP 쿠키, 웹 쿠키, 브라우저 쿠키는 모두 같은 말이다

- 동작 방식

<img src="https://media.vlpt.us/images/chelsea/post/8d4210b2-2662-4087-b7a0-20aba06fecc7/image.png" alt="img" style="zoom:50%;" />

서버에서 쿠키를 받으면, 브라우저는 해당 쿠키를 저장해 두었다가 HTTP 요청이 발생할 때 마다 이 쿠키를 담아서 보낸다. 

- 특징 
  - 개당 4KB까지 저장 할 수 있다.
  - 최대 300개 까지 저장 가능하다.
  - 이름, 값, 만료시점, 경로정보를 포함한다. 
  - 웹 브라우저 종료시, 혹은 만료시점에 삭제된다.
  - 브라우저에 해당 서버의 쿠키 정보가 있으면, HTTP 요청에 무조건 쿠키를 넣어 보낸다.

#### 세션

세션 방식은 세션ID를 이용해서 클라이언트를 식별한다. 서버는 인증된 클라이언트에서 세션 ID를 발급해 쿠키에 넣어 보내고, 브라우저는 이를 저장한 후 쿠키에 담아 보낸다. 

서버는 발급해준 세션 ID를 서버에 저장해서 클라이언트의 세션 ID를 이용해 정보를 확인한다. 

따라서 세션 ID는 열쇠라고 할 수 있다. 

-  동작 방식

<img src="https://media.vlpt.us/images/chelsea/post/a705ed18-77ec-4f9b-ad5f-e467737e51df/image.png" alt="img" style="zoom:50%;" />

- 특징
  - 서버에 저장하기 때문에, 용량의 제한이 없다. (서버의 용량을 잡아먹기 때문)
  - 서버에 세션 객체를 생성 후, 클라이언트마다 고유한 세션 ID를 부여한다.
  - 웹 브라우저가 종료되면 세션 쿠키를 삭제한다. 

#### 쿠키와 세션의 차이

세션은 쿠키와 반대되는 개념이 아니다. 세션은 쿠키를 이용한 하나의 방법이다. 

##### 저장 위치

쿠키 : 정보를 클라이언트에 저장한다. 따라서 접근속도가 빠르다.

세션 : 정보를 서버에 저장 후 클라이언트에 세션 ID를 발급해 준다. 접근속도가 쿠키에 비해 상대적으로 느리다. 

##### 보안

쿠키 : 정보를 클라이언트에 저장하기 때문에 보안에 취약하다.

세션 : 쿠키에 비해서 보안성이 높다. (쿠키의 취약점을 보완하기 위해 제시된 방법이다.)

##### 언제 사용?

쿠키 : 장바구니, 맞춤형 광고를 위한 사용자의 행동 등 보안이 중요하지 않은 정보를 저장할 때 사용한다. 

세션 : ID, PW, 토큰과 같은 보안이 중요한 정보를 저장해둔다. 



** 세션 만료를 클/서 중에 누가하느냐? 

세션 ID : 웹 브라우저 닫으면 강제로 없앨 수 있다

세션 ID를 삭제하는쪽은 클라이언트로 명확하지만, 세션 만료의 권한이 누구에게 있느냐는 아직 명확한 답을 얻지 못했다.

[출처](https://velog.io/@chelsea/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-HTTP-Cookie-vs-Session)

